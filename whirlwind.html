<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js ayu">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Whirlwind tour of basic features - Liquidata</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="chapter-item expanded "><a href="installation.html"><strong aria-hidden="true">1.</strong> Instalation</a></li><li class="chapter-item expanded "><a href="mPyPl.html"><strong aria-hidden="true">2.</strong> Comparison to mPyPl</a></li><li class="chapter-item expanded "><a href="whirlwind.html" class="active"><strong aria-hidden="true">3.</strong> Whirlwind tour of basic features</a></li><li class="chapter-item expanded "><a href="Tutorial.html"><strong aria-hidden="true">4.</strong> Tutorial</a></li><li class="chapter-item expanded "><a href="Architecture.html"><strong aria-hidden="true">5.</strong> Architecture</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu (default)</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Liquidata</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#whirlwind-tour-of-basic-features" id="whirlwind-tour-of-basic-features">Whirlwind tour of basic features</a></h1>
<pre><code class="language-python">from liquidata import pipe, sink

fn = pipe(
    [ sink(print) ],
    { str.isalpha },
    str.upper)

fn(dir())
</code></pre>
<ul>
<li>
<p><code>pipe</code> accepts an arbitrary number of pipe components.</p>
</li>
<li>
<p><code>pipe</code> returns a function (callable).</p>
</li>
<li>
<p>The function created by <code>pipe</code> accepts an iterable argument, and pushes its
elements through the pipeline.</p>
</li>
<li>
<p>Square brackets (<code>[ ]</code>) create <em>independent branches</em>: the same data are sent
both into the branch and downstream.</p>
</li>
<li>
<p><code>sink</code> feeds items into a (presumably) side-effectful function (<code>print</code> in
this example), and prevents them from going any further downstream.</p>
</li>
<li>
<p>Braces (<code>{ }</code>) are filters: they should contain a predicate (a function whose
return value is interpreted as a boolean; <code>str.isalpha</code>, in this example), and
will prevent any items which don't satisfy the predicate, from progressing
further down the pipe.</p>
</li>
<li>
<p>Unadorned functions are mappings: they accept incoming items, and the values
they return are sent downstream.</p>
</li>
<li>
<p>Any items that reach the end of a pipe are, by default, collected into a list
and returned.</p>
</li>
</ul>
<p>Consequently, in the above example:</p>
<ul>
<li>
<p>The names in the global scope (<code>dir()</code>) are fed into the pipeline, one by one.</p>
</li>
<li>
<p>Each incoming item is printed out.</p>
</li>
<li>
<p>Items containing non-alphabetic characters are filtered out.</p>
</li>
<li>
<p>All remaining items are uppercased ...</p>
</li>
<li>
<p>... and returned in a list.</p>
</li>
</ul>
<pre><code class="language-python">from operator import add
from liquidata import source, pipe, out, arg

pipe(
    source &lt;&lt; dir(),
    [ out.incoming ],
    { str.isalpha },
    { arg &gt; 5 : len },
    [ str.upper, out.big ],
    [ len, [ out.ADD(add) ], out.SUM(into(sum)) ],
    str.lower,
    out.small)
</code></pre>
<ul>
<li>
<p>Rather than using <code>pipe</code> to create a reusable function, we feed data into the
pipeline directly, by including the source in the pipeline. The following
three variations have the same meaning:</p>
<ul>
<li><code>source &lt;&lt; dir()</code></li>
<li><code>dir() &gt;&gt; source</code></li>
<li><code>source(dir())</code></li>
</ul>
</li>
<li>
<p>Rather than using a side-effect (<code>print</code>) to inspect what is passing through
the pipe at various points, in this example we used <em>named outputs</em>. <code>out</code> is
a sink which collects values so that they can be returned from the pipe.</p>
<ul>
<li>
<p>The presence of multiple <code>out</code>s in the graph, causes the pipeline to return
a namespace, rather than a single result.</p>
</li>
<li>
<p>If a pipe (or branch; branches are just pipes) does not explicitly end in a
<code>sink</code> or <code>out</code>, then it is implicitly capped with an anonymous <code>out</code>.</p>
</li>
<li>
<p><code>out.incoming</code> will collect all items into a list, and arrange for the list
to be bound to the name <code>incoming</code> in the namespace that is returned by the
pipe as a whole.</p>
</li>
<li>
<p><code>out.ADD(add)</code> uses a binary function (<code>add</code>) to fold or reduce all the
values it receives into a single one, which will be placed in the returned
namespace under the specified name, <code>ADD</code>.</p>
</li>
<li>
<p><code>out.SUM(into(sum))</code> feeds the items it receives into a callable which
consumes iterables (in this case <code>sum</code>, but keep in mind that there are very
many ready-made options here: <code>set</code>, <code>min</code>/<code>max</code>, <code>collections.Counter</code>, <code>', '.join</code>, etc.). The result will bound in the returned namespace under the
name <code>SUM</code>.</p>
</li>
<li>
<p><code>arg</code> provides a concise syntax for very simple anonymous functions: ones
consisting of the application of an operator and a constant to the
function's argument. In this example, we have <code>arg &gt; 5</code>. This is equivalent
to <code>lambda arg: arg &gt; 5</code>.</p>
</li>
<li>
<p>Braces containing colons are <em>key-filters</em>. In this example, <code>{ arg &gt; 5 : len }</code>. The predicate appears before the colon, but, rather than being
applied to the item in the pipe, it is applied to the result the key
function (specified after the colon) returns when given the item.</p>
<p>If the verdict is positive, the <em>original</em> item (rather than the value
returned by the key function) progresses downstream.</p>
<p>In this example, strings are coming through the pipe, and strings continue
past the filter, but only those whose <code>len</code> is greater than <code>5</code>.</p>
</li>
<li>
<p>Branches can be nested: <code>[ len, [ out.ADD(add) ], out.SUM(into(sum)) ]</code>.</p>
</li>
<li>
<p>The list of items reaching the end of the main pipe, unlike in the first
example, is not anonymous: it is bound to the name <code>small</code> in the returned
namespace.</p>
</li>
</ul>
</li>
<li>
<p>The result returned by the pipeline is a namespace containing 5 names.</p>
</li>
</ul>
<h2><a class="header" href="#synchnonized-branches-compound-flow-and-name-management" id="synchnonized-branches-compound-flow-and-name-management">Synchnonized branches, compound flow and name management</a></h2>
<p>TODO</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="mPyPl.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="Tutorial.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="mPyPl.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="Tutorial.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
